{% extends "base.html" %}

{% block content %}
<div class="max-w-5xl mx-auto">
    <div class="bg-white rounded-lg shadow-lg p-8 mb-6">
        <div class="flex justify-between items-center mb-6">
            <div>
                <h2 class="text-3xl font-bold text-gray-800">Resume Analysis Report</h2>
                <p class="text-gray-600 mt-1">{{ report.filename }}</p>
                <p class="text-sm text-gray-500">{{ report.timestamp }}</p>
            </div>
            <div class="text-center">
                <div class="text-5xl font-bold 
                    {% if report.overall_score >= 80 %}text-green-600
                    {% elif report.overall_score >= 60 %}text-yellow-600
                    {% else %}text-red-600{% endif %}">
                    {{ report.overall_score }}
                </div>
                <div class="text-gray-600 font-medium">Overall Score</div>
            </div>
        </div>
        
        {% if report.target_role %}
        <div class="bg-blue-50 border-l-4 border-blue-600 p-3 mb-6">
            <p class="text-sm font-medium text-blue-900">Target Role: {{ report.target_role }}</p>
        </div>
        {% endif %}
    </div>
    
    <!-- Sub-Scores -->
    <div class="bg-white rounded-lg shadow-lg p-8 mb-6">
        <h3 class="text-2xl font-bold text-gray-800 mb-4">Detailed Scores</h3>
        
        <div class="space-y-4">
            {% for key, value in report.sub_scores.items() %}
            <div>
                <div class="flex justify-between mb-1">
                    <span class="text-sm font-medium text-gray-700">
                        {{ key.replace('_', ' ').title() }}
                    </span>
                    <span class="text-sm font-semibold 
                        {% if value >= 80 %}text-green-600
                        {% elif value >= 60 %}text-yellow-600
                        {% else %}text-red-600{% endif %}">
                        {{ value }}
                    </span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div class="h-2.5 rounded-full 
                        {% if value >= 80 %}bg-green-600
                        {% elif value >= 60 %}bg-yellow-500
                        {% else %}bg-red-600{% endif %}"
                        style="width: {{ value }}%"></div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    
    <!-- Feedback -->
    <div class="bg-white rounded-lg shadow-lg p-8 mb-6">
        <h3 class="text-2xl font-bold text-gray-800 mb-4">Actionable Feedback</h3>
        
        {% if report.feedback.high_priority %}
        <div class="mb-6">
            <h4 class="text-lg font-semibold text-red-700 mb-2">ðŸ”´ High Priority</h4>
            <ul class="list-disc list-inside space-y-1 text-gray-700">
                {% for item in report.feedback.high_priority %}
                <li>{{ item }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
        
        {% if report.feedback.medium_priority %}
        <div class="mb-6">
            <h4 class="text-lg font-semibold text-yellow-700 mb-2">ðŸŸ¡ Medium Priority</h4>
            <ul class="list-disc list-inside space-y-1 text-gray-700">
                {% for item in report.feedback.medium_priority %}
                <li>{{ item }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
        
        {% if report.feedback.low_priority %}
        <div>
            <h4 class="text-lg font-semibold text-blue-700 mb-2">ðŸ”µ Low Priority</h4>
            <ul class="list-disc list-inside space-y-1 text-gray-700">
                {% for item in report.feedback.low_priority %}
                <li>{{ item }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
    </div>
    
    <!-- Bullet Rewrites -->
    {% if report.bullet_rewrites %}
    <div class="bg-white rounded-lg shadow-lg p-8 mb-6">
        <h3 class="text-2xl font-bold text-gray-800 mb-4">Suggested Bullet Improvements</h3>
        
        <div class="space-y-4">
            {% for rewrite in report.bullet_rewrites %}
            <div class="border-l-4 border-blue-500 pl-4">
                <p class="text-sm text-gray-500 mb-1">Before:</p>
                <p class="text-gray-700 mb-2">{{ rewrite.original }}</p>
                <p class="text-sm text-green-600 font-medium mb-1">After:</p>
                <p class="text-gray-900 font-medium">{{ rewrite.suggested }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
    
    <div class="text-center">
        <a href="/" class="inline-block bg-blue-600 text-white py-3 px-8 rounded-md hover:bg-blue-700 font-semibold transition duration-200">
            Analyze Another Resume
        </a>
    </div>
</div>
{% endblock %}
